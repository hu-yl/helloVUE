{"remainingRequest":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huyaolong/Desktop/helloVUE/helloVUE/src/components/pages/Goods.vue?vue&type=style&index=0&id=cd671c6a&scoped=true&lang=css&","dependencies":[{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/src/components/pages/Goods.vue","mtime":1553488261244},{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.goods-name {\n  background-color: #fff;\n}\n.goods-price {\n  background-color: #fff;\n}\n.detail {\n  font-size: 0px;\n}\n.goods-bottom {\n  position: fixed;\n  bottom: 0px;\n  left: 0px;\n  background-color: #fff;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  flex-flow: nowrap;\n}\n\n.goods-bottom > div {\n  flex: 1;\n  padding: 5px;\n}\n",{"version":3,"sources":["Goods.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Goods.vue","sourceRoot":"src/components/pages","sourcesContent":["<template>\n  <div>\n    <div class=\"navbar-div\">\n      <van-nav-bar title=\"商品详情\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\"/>\n    </div>\n    <div class=\"topimage-div\">\n      <img :src=\"goodsInfo.IMAGE1\" width=\"100%\">\n    </div>\n    <div class=\"goods-name\">{{goodsInfo.NAME}}</div>\n    <div class=\"goods-price\">价格 ：￥{{goodsInfo.PRESENT_PRICE | moneyFilter}}元</div>\n    <div>\n      <van-tabs swipeable sticky>\n        <van-tab title=\"商品详情\">\n          <div class=\"detail\" v-html=\"goodsInfo.DETAIL\"></div>\n        </van-tab>\n        <van-tab title=\"评论\">评论制作中</van-tab>\n      </van-tabs>\n    </div>\n\n    <div class=\"goods-bottom\">\n      <div>\n        <van-button size=\"large\" type=\"primary\" @click=\"addGoodsToCart\">加入购物车</van-button>\n      </div>\n      <div>\n        <van-button size=\"large\" type=\"danger\">直接购买</van-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport url from \"@/serviceAPI.config.js\";\nimport { Toast } from \"vant\";\nimport { toMoney } from \"@/filter/moneyFilter.js\";\nexport default {\n  data() {\n    return {\n      goodsId: \"\",\n      goodsInfo: {} //商品详细信息\n    };\n  },\n  filters: {\n    moneyFilter(money) {\n      return toMoney(money);\n    }\n  },\n  created() {\n    this.goodsId = this.$route.query.goodsId\n      ? this.$route.query.goodsId\n      : this.$route.params.goodsId;\n    console.log(this.goodsId);\n    this.getInfo();\n  },\n  mounted(){\n    let winHeight = document.documentElement.clientHeight\n    document.getElementById('leftNav').style.height=winHeight-46-50 +'px'\n    document.getElementById('list-div').style.height=winHeight-90-50 +'px'\n},\n  methods: {\n    getInfo() {\n      axios({\n        url: url.getDetailGoodsInfo,\n        method: \"post\",\n        data: { goodsId: this.goodsId }\n      })\n        .then(response => {\n          if (response.data.code == 200 && response.data.message) {\n            this.goodsInfo = response.data.message;\n          } else {\n            Toast(\"服务器错误，数据获取失败\");\n          }\n          console.log(this.goodsInfo);\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    },\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    addGoodsToCart() {\n      //取出本地购物车中的商品\n      //localStorage.removeItem('cartInfo')\n      let cartInfo = localStorage.cartInfo\n        ? JSON.parse(localStorage.cartInfo)\n        : [];\n      let isHaveGoods = cartInfo.find(cart => cart.goodsId == this.goodsId);\n      console.log(isHaveGoods);\n      console.log(this.goodsInfo);\n      if (!isHaveGoods) {\n        let newGoodsInfo = {\n          goodsId: this.goodsInfo.ID,\n          Name: this.goodsInfo.NAME,\n          price: this.goodsInfo.PRESENT_PRICE,\n          image: this.goodsInfo.IMAGE1,\n          count: 1\n        };\n        cartInfo.push(newGoodsInfo);\n        localStorage.cartInfo = JSON.stringify(cartInfo);\n        Toast.success(\"添加成功\");\n      } else {\n        Toast.success(\"已有此商品\");\n      }\n\n      this.$router.push({ name: \"Cart\" });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.goods-name {\n  background-color: #fff;\n}\n.goods-price {\n  background-color: #fff;\n}\n.detail {\n  font-size: 0px;\n}\n.goods-bottom {\n  position: fixed;\n  bottom: 0px;\n  left: 0px;\n  background-color: #fff;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  flex-flow: nowrap;\n}\n\n.goods-bottom > div {\n  flex: 1;\n  padding: 5px;\n}\n</style>"]}]}