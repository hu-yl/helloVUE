{"remainingRequest":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/babel-loader/lib/index.js!/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huyaolong/Desktop/helloVUE/helloVUE/src/components/pages/Goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/src/components/pages/Goods.vue","mtime":1553488261244},{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"/Users/huyaolong/Desktop/helloVUE/helloVUE/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.array.find\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport url from \"@/serviceAPI.config.js\";\nimport { toMoney } from \"@/filter/moneyFilter.js\";\nexport default {\n  data: function data() {\n    return {\n      goodsId: \"\",\n      goodsInfo: {} //商品详细信息\n\n    };\n  },\n  filters: {\n    moneyFilter: function moneyFilter(money) {\n      return toMoney(money);\n    }\n  },\n  created: function created() {\n    this.goodsId = this.$route.query.goodsId ? this.$route.query.goodsId : this.$route.params.goodsId;\n    console.log(this.goodsId);\n    this.getInfo();\n  },\n  mounted: function mounted() {\n    var winHeight = document.documentElement.clientHeight;\n    document.getElementById('leftNav').style.height = winHeight - 46 - 50 + 'px';\n    document.getElementById('list-div').style.height = winHeight - 90 - 50 + 'px';\n  },\n  methods: {\n    getInfo: function getInfo() {\n      var _this = this;\n\n      axios({\n        url: url.getDetailGoodsInfo,\n        method: \"post\",\n        data: {\n          goodsId: this.goodsId\n        }\n      }).then(function (response) {\n        if (response.data.code == 200 && response.data.message) {\n          _this.goodsInfo = response.data.message;\n        } else {\n          _Toast(\"服务器错误，数据获取失败\");\n        }\n\n        console.log(_this.goodsInfo);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1);\n    },\n    addGoodsToCart: function addGoodsToCart() {\n      var _this2 = this;\n\n      //取出本地购物车中的商品\n      //localStorage.removeItem('cartInfo')\n      var cartInfo = localStorage.cartInfo ? JSON.parse(localStorage.cartInfo) : [];\n      var isHaveGoods = cartInfo.find(function (cart) {\n        return cart.goodsId == _this2.goodsId;\n      });\n      console.log(isHaveGoods);\n      console.log(this.goodsInfo);\n\n      if (!isHaveGoods) {\n        var newGoodsInfo = {\n          goodsId: this.goodsInfo.ID,\n          Name: this.goodsInfo.NAME,\n          price: this.goodsInfo.PRESENT_PRICE,\n          image: this.goodsInfo.IMAGE1,\n          count: 1\n        };\n        cartInfo.push(newGoodsInfo);\n        localStorage.cartInfo = _JSON$stringify(cartInfo);\n\n        _Toast.success(\"添加成功\");\n      } else {\n        _Toast.success(\"已有此商品\");\n      }\n\n      this.$router.push({\n        name: \"Cart\"\n      });\n    }\n  }\n};",{"version":3,"sources":["Goods.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"navbar-div\">\n      <van-nav-bar title=\"商品详情\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\"/>\n    </div>\n    <div class=\"topimage-div\">\n      <img :src=\"goodsInfo.IMAGE1\" width=\"100%\">\n    </div>\n    <div class=\"goods-name\">{{goodsInfo.NAME}}</div>\n    <div class=\"goods-price\">价格 ：￥{{goodsInfo.PRESENT_PRICE | moneyFilter}}元</div>\n    <div>\n      <van-tabs swipeable sticky>\n        <van-tab title=\"商品详情\">\n          <div class=\"detail\" v-html=\"goodsInfo.DETAIL\"></div>\n        </van-tab>\n        <van-tab title=\"评论\">评论制作中</van-tab>\n      </van-tabs>\n    </div>\n\n    <div class=\"goods-bottom\">\n      <div>\n        <van-button size=\"large\" type=\"primary\" @click=\"addGoodsToCart\">加入购物车</van-button>\n      </div>\n      <div>\n        <van-button size=\"large\" type=\"danger\">直接购买</van-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport url from \"@/serviceAPI.config.js\";\nimport { Toast } from \"vant\";\nimport { toMoney } from \"@/filter/moneyFilter.js\";\nexport default {\n  data() {\n    return {\n      goodsId: \"\",\n      goodsInfo: {} //商品详细信息\n    };\n  },\n  filters: {\n    moneyFilter(money) {\n      return toMoney(money);\n    }\n  },\n  created() {\n    this.goodsId = this.$route.query.goodsId\n      ? this.$route.query.goodsId\n      : this.$route.params.goodsId;\n    console.log(this.goodsId);\n    this.getInfo();\n  },\n  mounted(){\n    let winHeight = document.documentElement.clientHeight\n    document.getElementById('leftNav').style.height=winHeight-46-50 +'px'\n    document.getElementById('list-div').style.height=winHeight-90-50 +'px'\n},\n  methods: {\n    getInfo() {\n      axios({\n        url: url.getDetailGoodsInfo,\n        method: \"post\",\n        data: { goodsId: this.goodsId }\n      })\n        .then(response => {\n          if (response.data.code == 200 && response.data.message) {\n            this.goodsInfo = response.data.message;\n          } else {\n            Toast(\"服务器错误，数据获取失败\");\n          }\n          console.log(this.goodsInfo);\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    },\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    addGoodsToCart() {\n      //取出本地购物车中的商品\n      //localStorage.removeItem('cartInfo')\n      let cartInfo = localStorage.cartInfo\n        ? JSON.parse(localStorage.cartInfo)\n        : [];\n      let isHaveGoods = cartInfo.find(cart => cart.goodsId == this.goodsId);\n      console.log(isHaveGoods);\n      console.log(this.goodsInfo);\n      if (!isHaveGoods) {\n        let newGoodsInfo = {\n          goodsId: this.goodsInfo.ID,\n          Name: this.goodsInfo.NAME,\n          price: this.goodsInfo.PRESENT_PRICE,\n          image: this.goodsInfo.IMAGE1,\n          count: 1\n        };\n        cartInfo.push(newGoodsInfo);\n        localStorage.cartInfo = JSON.stringify(cartInfo);\n        Toast.success(\"添加成功\");\n      } else {\n        Toast.success(\"已有此商品\");\n      }\n\n      this.$router.push({ name: \"Cart\" });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.goods-name {\n  background-color: #fff;\n}\n.goods-price {\n  background-color: #fff;\n}\n.detail {\n  font-size: 0px;\n}\n.goods-bottom {\n  position: fixed;\n  bottom: 0px;\n  left: 0px;\n  background-color: #fff;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  flex-flow: nowrap;\n}\n\n.goods-bottom > div {\n  flex: 1;\n  padding: 5px;\n}\n</style>"],"sourceRoot":"src/components/pages"}]}