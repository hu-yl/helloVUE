{"remainingRequest":"/Users/huyaolong/Desktop/hello-shop/node_modules/babel-loader/lib/index.js!/Users/huyaolong/Desktop/hello-shop/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huyaolong/Desktop/hello-shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huyaolong/Desktop/hello-shop/src/components/pages/CategoryList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huyaolong/Desktop/hello-shop/src/components/pages/CategoryList.vue","mtime":1553445387604},{"path":"/Users/huyaolong/Desktop/hello-shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/hello-shop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/hello-shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huyaolong/Desktop/hello-shop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport url from '@/serviceAPI.config.js';\nimport { toMoney } from '@/filter/moneyFilter.js';\nexport default {\n  data: function data() {\n    return {\n      category: [],\n      categoryIndex: 0,\n      categorySub: [],\n      //小类类别\n      active: 0,\n      //激活标签的值\n      loading: false,\n      finished: false,\n      //上拉加载是否有数据\n      page: 1,\n      //商品列表的页数\n      goodList: [],\n      //商品列表信息\n      categorySubId: '',\n      //商品子类ID\n      isRefresh: false,\n      //下拉刷新\n      errorImg: 'this.src=\"' + require('@/assets/images/errorimg.png') + '\"'\n    };\n  },\n  filters: {\n    moneyFilter: function moneyFilter(money) {\n      return toMoney(money);\n    }\n  },\n  created: function created() {\n    this.getCategory();\n  },\n  mounted: function mounted() {\n    var winHeight = document.documentElement.clientHeight;\n    document.getElementById(\"leftNav\").style.height = winHeight - 46 - 50 + 'px';\n    document.getElementById(\"list-div\").style.height = winHeight - 90 - 50 + 'px';\n  },\n  methods: {\n    getCategory: function getCategory() {\n      var _this = this;\n\n      axios({\n        url: url.getCateGoryList,\n        method: 'get'\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.data.code == 200 && response.data.message) {\n          _this.category = response.data.message;\n\n          _this.getCategorySubByCategoryID(_this.category[0].ID);\n        } else {\n          Toast('服务器错误，数据取得失败');\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    clickCategory: function clickCategory(index, categoryId) {\n      this.categoryIndex = index;\n      this.page = 1;\n      this.finished = false;\n      this.goodList = [];\n      this.getCategorySubByCategoryID(categoryId);\n    },\n    //根据大类ID读取小类类别列表\n    getCategorySubByCategoryID: function getCategorySubByCategoryID(categoryId) {\n      var _this2 = this;\n\n      axios({\n        url: url.getCateGorySubList,\n        method: 'post',\n        data: {\n          categoryId: categoryId\n        }\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.data.code == 200 && response.data.message) {\n          _this2.categorySub = response.data.message;\n          _this2.active = 0;\n          _this2.categorySubId = _this2.categorySub[0].ID;\n\n          _this2.onLoad();\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //上拉加载方法\n    onLoad: function onLoad() {\n      var _this3 = this;\n\n      setTimeout(function () {\n        _this3.categorySubId = _this3.categorySubId ? _this3.categorySubId : _this3.categorySub[0].ID;\n\n        _this3.getGoodList();\n      }, 1000);\n    },\n    //下拉刷新方法\n    onRefresh: function onRefresh() {\n      var _this4 = this;\n\n      setTimeout(function () {\n        _this4.isRefresh = false;\n        _this4.finished = false;\n        _this4.goodList = [];\n        _this4.page = 1;\n\n        _this4.onLoad();\n      }, 500);\n    },\n    getGoodList: function getGoodList() {\n      var _this5 = this;\n\n      axios({\n        url: url.getGoodsListByCategorySubID,\n        method: 'post',\n        data: {\n          categorySubId: this.categorySubId,\n          page: this.page\n        }\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.data.code == 200 && response.data.message.length) {\n          _this5.page++;\n          _this5.goodList = _this5.goodList.concat(response.data.message);\n        } else {\n          _this5.finished = true;\n        }\n\n        _this5.loading = false;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    onClickCategorySub: function onClickCategorySub(index, title) {\n      this.categorySubId = this.categorySub[index].ID;\n      console.log('categorySubId:' + this.categorySubId);\n      this.goodList = [];\n      this.finished = false;\n      this.page = 1;\n      this.onLoad();\n    },\n    //跳转到商品详细页\n    goGoodsInfo: function goGoodsInfo(id) {\n      this.$router.push({\n        name: 'Goods',\n        params: {\n          goodsId: id\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["CategoryList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <div class=\"navbar-div\">\n            <van-nav-bar title=\"类别列表\" />\n        </div>\n\n        <div>\n          <van-row>\n              <van-col span=\"6\">\n                  <div id=\"leftNav\">\n                       <ul>\n                           <li @click=\"clickCategory(index,item.ID)\" :class=\"{categoryActice:categoryIndex==index}\" v-for=\"(item , index) in category\" :key=\"index\">\n                               {{item.MALL_CATEGORY_NAME}}\n                           </li>\n                       </ul>\n                  </div>\n                 \n              </van-col>\n              <van-col span=\"18\">\n\n                  <div class=\"tabCategorySub\">\n                      <van-tabs v-model=\"active\" @click=\"onClickCategorySub\">\n                          <van-tab v-for=\"(item,index) in categorySub\" :key=\"index\" :title=\"item.MALL_SUB_NAME\">\n\n                          </van-tab>\n                      </van-tabs>\n                  </div>\n                  \n                <div id=\"list-div\">\n                    <van-pull-refresh v-model=\"isRefresh\" @refresh=\"onRefresh\">\n                        <van-list v-model=\"loading\" :finished=\"finished\" @load=\"onLoad\">\n                            <div class=\"list-item\" @click=\"goGoodsInfo(item.ID)\" v-for=\"(item,index) in goodList\" :key=\"index\">\n                                <div class=\"list-item-img\">\n                                    <img :src=\"item.IMAGE1\" \n                                    width=\"100%\"\n                                    :onerror=\"errorImg\"                                    \n                                     />\n                                    \n                                    \n                                   \n                                </div>\n                                <div class=\"list-item-text\">\n                                    <div>{{item.NAME}}</div>                                    \n                                    <div>￥{{item.ORI_PRICE | moneyFilter}}</div>                                    \n                                 </div>\n                            </div>\n                        </van-list>\n                    </van-pull-refresh>\n                </div>\n              </van-col>\n          </van-row>  \n        </div>\n\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n    import url from '@/serviceAPI.config.js'\n    import {toMoney} from '@/filter/moneyFilter.js'\n    export default {\n        data() {\n            return {\n                category: [],\n                categoryIndex:0,\n                categorySub:[],  //小类类别\n                active:0,    //激活标签的值\n                loading:false,\n                finished:false, //上拉加载是否有数据\n                page:1,        //商品列表的页数\n                goodList:[],   //商品列表信息\n                categorySubId:'', //商品子类ID\n                isRefresh:false, //下拉刷新\n                errorImg:'this.src=\"'+require('@/assets/images/errorimg.png')+'\"',\n            }\n        },\n        filters:{\n            moneyFilter(money){\n                return toMoney(money)\n            }\n        },\n        created(){\n            this.getCategory();\n           \n        },\n        mounted(){\n            let winHeight = document.documentElement.clientHeight\n            document.getElementById(\"leftNav\").style.height=winHeight -46-50 +'px'\n            document.getElementById(\"list-div\").style.height=winHeight -90-50 +'px'\n        },\n        methods: {\n            getCategory() {\n                axios({\n                    url:url.getCateGoryList,\n                    method:'get',\n                })\n                .then(response=>{\n                    console.log(response)\n                    if(response.data.code == 200 && response.data.message ){\n                      this.category = response.data.message\n                      this.getCategorySubByCategoryID(this.category[0].ID)\n                    }else{\n                        Toast('服务器错误，数据取得失败')\n                    }\n                })\n                .catch(error=>{\n                    console.log(error)\n                })\n                \n            },\n            clickCategory(index,categoryId){\n                 \n                this.categoryIndex=index\n                this.page=1\n                this.finished = false\n                this.goodList= [] \n                this.getCategorySubByCategoryID(categoryId)\n            },\n            //根据大类ID读取小类类别列表\n            getCategorySubByCategoryID(categoryId){\n                axios({\n                    url:url.getCateGorySubList,\n                    method:'post',\n                    data:{categoryId:categoryId}\n                })\n                .then(response=>{\n                    console.log(response)\n                    if(response.data.code==200 && response.data.message){\n                        this.categorySub=response.data.message\n                        this.active=0\n                        this.categorySubId = this.categorySub[0].ID\n                        this.onLoad()\n                    }\n                })\n                .catch(error=>{\n                    console.log(error)\n                })\n            },\n            //上拉加载方法\n            onLoad(){\n                setTimeout(()=>{\n                   this.categorySubId = this.categorySubId?this.categorySubId:this.categorySub[0].ID\n                   this.getGoodList()\n                },1000)\n            },\n            //下拉刷新方法\n            onRefresh(){\n                setTimeout(()=>{\n                    this.isRefresh=false;\n                    this.finished = false;\n                    this.goodList=[]\n                    this.page=1\n                    this.onLoad()\n\n                },500)\n            },\n            getGoodList(){\n                axios({\n                    url:url.getGoodsListByCategorySubID,\n                    method:'post',\n                    data:{\n                        categorySubId:this.categorySubId,\n                        page:this.page\n                    }\n                })\n                .then(response=>{\n                    console.log(response)\n                    if(response.data.code == 200  && response.data.message.length){\n                        this.page++\n                        this.goodList=this.goodList.concat(response.data.message)\n                    }else{\n                        this.finished = true\n                    }\n                    this.loading = false;\n                    \n                })\n                .catch(error=>{\n                    console.log(error)\n                })\n            },\n            onClickCategorySub(index,title){\n                this.categorySubId = this.categorySub[index].ID\n                console.log('categorySubId:'+this.categorySubId)\n                this.goodList=[]\n                this.finished = false\n                this.page = 1\n                this.onLoad()\n\n            },\n            //跳转到商品详细页\n            goGoodsInfo(id){\n                this.$router.push({name:'Goods',params:{goodsId:id}})\n            }\n\n          \n\n           \n        },\n    }\n</script>\n\n<style scoped>\n    #leftNav{\n        background-color: aliceblue;\n    }\n    #leftNav ul li {\n        line-height: 2rem;\n        border-bottom: 1px solid #E4E7ED;\n        padding:3px;\n        font-size:0.8rem;\n        text-align: center;\n    }\n    .categoryActice{\n        background-color: #fff;\n    }\n\n\n    .list-item{\n        display: flex;\n        flex-direction: row;\n        font-size:0.8rem;\n        border-bottom: 1px solid #f0f0f0;\n        background-color: #fff;\n        padding:5px;\n    }\n    #list-div{\n        overflow: scroll;\n    }\n    .list-item-img{\n        flex:8;\n    }\n    .list-item-text{\n        flex:16;\n        margin-top:10px;\n        margin-left:10px;\n    }\n   \n</style>"],"sourceRoot":"src/components/pages"}]}